!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dscc",[],t):"object"==typeof exports?exports.dscc=t():e.dscc=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"./node_modules/querystringify/index.js":
/*!**********************************************!*\
  !*** ./node_modules/querystringify/index.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var n=[];for(var o in"string"!=typeof t&&(t="?"),e)r.call(e,o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n.length?t+n.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var s=o(t[1]),i=o(t[2]);s in r||(r[s]=i)}return r}},"./node_modules/requires-port/index.js":
/*!*********************************************!*\
  !*** ./node_modules/requires-port/index.js ***!
  \*********************************************/
/*! no static exports found */function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"./node_modules/url-parse/index.js":
/*!*****************************************!*\
  !*** ./node_modules/url-parse/index.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(t){var r=n(/*! requires-port */"./node_modules/requires-port/index.js"),o=n(/*! querystringify */"./node_modules/querystringify/index.js"),s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function u(e){var n,r={},o=typeof(e=e||t.location||{});if("blob:"===e.protocol)r=new p(unescape(e.pathname),{});else if("string"===o)for(n in r=new p(e,{}),c)delete r[n];else if("object"===o){for(n in e)n in c||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=i.test(e.href))}return r}function l(e){var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,n){if(!(this instanceof p))return new p(e,t,n);var s,i,c,f,d,h,m=a.slice(),y=typeof t,g=this,v=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=u(t),s=!(i=l(e||"")).protocol&&!i.slashes,g.slashes=i.slashes||s&&t.slashes,g.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(m[2]=[/(.*)/,"pathname"]);v<m.length;v++)c=(f=m[v])[0],h=f[1],c!=c?g[h]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof f[2]?(g[h]=e.slice(0,d),e=e.slice(d+f[2])):(g[h]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(g[h]=d[1],e=e.slice(0,d.index)),g[h]=g[h]||s&&f[3]&&t[h]||"",f[4]&&(g[h]=g[h].toLowerCase());n&&(g.query=n(g.query)),s&&t.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==t.pathname)&&(g.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],s=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(s=!0),n.splice(r,1),i--);return s&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(g.pathname,t.pathname)),r(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(f=g.auth.split(":"),g.username=f[0]||"",g.password=f[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}p.prototype={set:function(e,t,n){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),s[e]=t;break;case"port":s[e]=t,r(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,/:\d+$/.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";s[e]=t.charAt(0)!==i?i+t:t}else s[e]=t;break;default:s[e]=t}for(var c=0;c<a.length;c++){var u=a[c];u[4]&&(s[u[1]]=s[u[1]].toLowerCase())}return s.origin=s.protocol&&s.host&&"file:"!==s.protocol?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(n.slashes?"//":"");return n.username&&(s+=n.username,n.password&&(s+=":"+n.password),s+="@"),s+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},p.extractProtocol=l,p.location=u,p.qs=o,e.exports=p}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/data-studio-types.ts":
/*!**********************************!*\
  !*** ./src/data-studio-types.ts ***!
  \**********************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DIMENSION=1]="DIMENSION",e[e.METRIC=2]="METRIC",e[e.MAX_RESULTS=3]="MAX_RESULTS"}(t.ConfigElementType||(t.ConfigElementType={}))},"./src/data-transform.ts":
/*!*******************************!*\
  !*** ./src/data-transform.ts ***!
  \*******************************/
/*! no static exports found */function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ./data-studio-types */"./src/data-studio-types.ts");t.destructImage=function(e){var t=e.split("  ");return{originalUrl:t[0],proxiedUrl:t[1],altText:t[2]}};var s=function(e,t,n){var r,o,s,i,a=n(e[t]);return r=e,o=t,s=a,Object.assign({},r,((i={})[o]=s,i))};t.buildFieldsAndRows=function(e){e.rows.primaryRows[0];var n=e.data.reduce(function(e,t){return t.elements.filter(function(e){return e.type===o.ConfigElementType.DIMENSION||e.type===o.ConfigElementType.METRIC}).reduce(function(e,t){return e.push(t),e},[])},[]);if(2!==n.length)throw"Only configs with one metric and one dimension are supported. Your config:\n"+JSON.stringify(e.data);if(n[0].type!==o.ConfigElementType.DIMENSION)throw"Your first config element must be a dimension. Your first: "+n[0];if(n[1].type!==o.ConfigElementType.METRIC)throw"Your second config element must be a metric. Your first: "+n[0];var r,i,a=n[0],c=n[1],u=e.schema,l=u.map(function(e){return"DIMENSION"===e.concept?a:c}),p=function(e){return function(n){return(r=n,o=u,i=l,r.map(function(e,t){return[e,o[t],i[t]]})).reduce(function(e,n){var r=n[0],o=n[1],i=n[2];return s(e,i.id,function(e){var n=function(e,n){return"IMAGE"===n.semantic?t.destructImage(e):e}(r,o);return void 0===e?[n]:e.concat([n])})},{dataTag:e});var r,o,i}};return{fields:(r=u,i=l,r.map(function(e,t){return[e,i[t]]})).reduce(function(e,t){var n=t[0],r=t[1];return s(e,r.id,function(e){var t=function(e,t){return{id:e,concept:t.concept,dataStudioId:t.name,name:t.label,type:function(e){return"CURRENCY"===e.semantic?"CURRENCY_"+e.semanticOption:e.semantic}(t)}}(r.id,n);return void 0===e?[t]:e.concat([t])})},{}),rows:e.rows.comparisonRows.map(p("comparisonRow")).concat(e.rows.primaryRows.map(p("primaryRow")))}},t.transformData=function(e){return r({style:e.style,type:e.type},t.buildFieldsAndRows(e))}},"./src/impl.ts":
/*!*********************!*\
  !*** ./src/impl.ts ***!
  \*********************/
/*! no static exports found */function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[0,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this;Object.defineProperty(t,"__esModule",{value:!0});
/*!
  Copyright 2018 Google LLC

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
var i=n(/*! ./data-transform */"./src/data-transform.ts"),a=n(/*! url-parse */"./node_modules/url-parse/index.js");t.postMessage=function(e){window.parent.postMessage(e,"*")},t.getWidth=function(){return document.body.clientWidth},t.getHeight=function(){return document.documentElement.clientHeight},t.getComponentId=function(){return a(window.parent.location.href,!0).query.componentId},t.subscribeToData=function(e,n){return void 0===n&&(n={transform:i.transformData}),r(s,void 0,void 0,function(){var r,s,i;return o(this,function(o){return r=n.transform,s=function(t){if("RENDER"===t.data.type){var n=t.data;e(r(n))}},window.addEventListener("message",s),i=t.getComponentId(),t.postMessage({componentId:i,type:"vizReady"}),[2,function(){return window.removeEventListener("message",s)}]})})}},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/*!
  Copyright 2018 Google LLC

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
var r=n(/*! ./impl */"./src/impl.ts");t.subscribeToData=r.subscribeToData,t.getWidth=r.getWidth,t.getHeight=r.getHeight}})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kc2NjL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kc2NjL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2RzY2MvLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmdpZnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZHNjYy8uL25vZGVfbW9kdWxlcy9yZXF1aXJlcy1wb3J0L2luZGV4LmpzIiwid2VicGFjazovL2RzY2MvLi9ub2RlX21vZHVsZXMvdXJsLXBhcnNlL2luZGV4LmpzIiwid2VicGFjazovL2RzY2MvKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL2RzY2MvLi9zcmMvZGF0YS1zdHVkaW8tdHlwZXMudHMiLCJ3ZWJwYWNrOi8vZHNjYy8uL3NyYy9kYXRhLXRyYW5zZm9ybS50cyIsIndlYnBhY2s6Ly9kc2NjLy4vc3JjL2ltcGwudHMiLCJ3ZWJwYWNrOi8vZHNjYy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJoYXMiLCJkZWNvZGUiLCJpbnB1dCIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlcGxhY2UiLCJzdHJpbmdpZnkiLCJvYmoiLCJwcmVmaXgiLCJwYWlycyIsImtleSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJsZW5ndGgiLCJqb2luIiwicGFyc2UiLCJxdWVyeSIsInBhcnQiLCJwYXJzZXIiLCJyZXN1bHQiLCJleGVjIiwicG9ydCIsInByb3RvY29sIiwic3BsaXQiLCJyZXF1aXJlZCIsInFzIiwicHJvdG9jb2xyZSIsInNsYXNoZXMiLCJydWxlcyIsIk5hTiIsInVuZGVmaW5lZCIsImlnbm9yZSIsImhhc2giLCJsb2xjYXRpb24iLCJsb2MiLCJmaW5hbGRlc3RpbmF0aW9uIiwidHlwZSIsImdsb2JhbCIsImxvY2F0aW9uIiwiVVJMIiwidW5lc2NhcGUiLCJwYXRobmFtZSIsInRlc3QiLCJocmVmIiwiZXh0cmFjdFByb3RvY29sIiwiYWRkcmVzcyIsIm1hdGNoIiwidG9Mb3dlckNhc2UiLCJyZXN0IiwidGhpcyIsInJlbGF0aXZlIiwiZXh0cmFjdGVkIiwiaW5zdHJ1Y3Rpb24iLCJpbmRleCIsImluc3RydWN0aW9ucyIsInNsaWNlIiwidXJsIiwiaW5kZXhPZiIsImNoYXJBdCIsImJhc2UiLCJwYXRoIiwiY29uY2F0IiwibGFzdCIsInVuc2hpZnQiLCJ1cCIsInNwbGljZSIsInJlc29sdmUiLCJob3N0IiwiaG9zdG5hbWUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYXV0aCIsIm9yaWdpbiIsInRvU3RyaW5nIiwic2V0IiwiZm4iLCJwb3AiLCJjaGFyIiwiaW5zIiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsImUiLCJDb25maWdFbGVtZW50VHlwZSIsIl9fYXNzaWduIiwiYXNzaWduIiwidCIsImFyZ3VtZW50cyIsIkRTIiwiZGVzdHJ1Y3RJbWFnZSIsIl9hIiwib3JpZ2luYWxVcmwiLCJwcm94aWVkVXJsIiwiYWx0VGV4dCIsInVwZGF0ZSIsImYiLCJuZXdLZXkiLCJuZXdWYWwiLCJuZXdQcm9wIiwiYnVpbGRGaWVsZHNBbmRSb3dzIiwibWVzc2FnZSIsInJvd3MiLCJwcmltYXJ5Um93cyIsImZsYXR0ZW5lZEVsZW1lbnRzIiwiZGF0YSIsInJlZHVjZSIsImFjYyIsImNvbmZpZ0RhdGEiLCJlbGVtZW50cyIsImZpbHRlciIsImVsZW1lbnQiLCJESU1FTlNJT04iLCJNRVRSSUMiLCJKU09OIiwidHMiLCJ1cyIsImRpbWVuc2lvbkNvbmZpZyIsIm1ldHJpY0NvbmZpZyIsInNjaGVtYSIsImNvbmZpZ3MiLCJtYXAiLCJzY2hlbWFFbnRyeSIsImNvbmNlcHQiLCJmaXhSb3ciLCJkYXRhVGFnIiwicm93IiwidnMiLCJpZHgiLCJyb3dWYWx1ZSIsImNvbmZpZyIsImlkIiwib2xkIiwidmFsIiwic2VtYW50aWMiLCJ0b0xpYlJvd1ZhbHVlIiwiZmllbGRzIiwiZmllbGQiLCJjb25maWdJZCIsImRhdGFTdHVkaW9JZCIsImxhYmVsIiwic2VtYW50aWNPcHRpb24iLCJ0b0ZpZWxkVHlwZSIsInNjaGVtYUVudHJ5VG9GaWVsZCIsImNvbXBhcmlzb25Sb3dzIiwidHJhbnNmb3JtRGF0YSIsInN0eWxlIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwicmVqZWN0ZWQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiX19nZW5lcmF0b3IiLCJib2R5IiwieSIsIl8iLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJ0aHJvdyIsInJldHVybiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiX3RoaXMiLCJkYXRhX3RyYW5zZm9ybV8xIiwicG9zdE1lc3NhZ2UiLCJjbGllbnRNZXNzYWdlIiwicGFyZW50IiwiZ2V0V2lkdGgiLCJkb2N1bWVudCIsImNsaWVudFdpZHRoIiwiZ2V0SGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiZ2V0Q29tcG9uZW50SWQiLCJjb21wb25lbnRJZCIsInN1YnNjcmliZVRvRGF0YSIsImNhbGxiYWNrIiwic3Vic2NyaXB0aW9uT3B0aW9ucyIsInRyYW5zZm9ybSIsIm9uTWVzc2FnZSIsIm1lc3NhZ2VE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QUFnQixFQUFBaEIsU0FDQXBOLEVBQUF1TixVQUFBYSxFQUFBYiIsImZpbGUiOiJkc2NjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiZHNjY1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJkc2NjXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImRzY2NcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9pbmRleC50c1wiKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogRGVjb2RlIGEgVVJJIGVuY29kZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgVVJJIGVuY29kZWQgc3RyaW5nLlxuICogQHJldHVybnMge1N0cmluZ30gVGhlIGRlY29kZWQgc3RyaW5nLlxuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGlucHV0LnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgcXVlcnkgc3RyaW5nIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgVGhlIHF1ZXJ5IHN0cmluZyB0aGF0IG5lZWRzIHRvIGJlIHBhcnNlZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeSkge1xuICB2YXIgcGFyc2VyID0gLyhbXj0/Jl0rKT0/KFteJl0qKS9nXG4gICAgLCByZXN1bHQgPSB7fVxuICAgICwgcGFydDtcblxuICB3aGlsZSAocGFydCA9IHBhcnNlci5leGVjKHF1ZXJ5KSkge1xuICAgIHZhciBrZXkgPSBkZWNvZGUocGFydFsxXSlcbiAgICAgICwgdmFsdWUgPSBkZWNvZGUocGFydFsyXSk7XG5cbiAgICAvL1xuICAgIC8vIFByZXZlbnQgb3ZlcnJpZGluZyBvZiBleGlzdGluZyBwcm9wZXJ0aWVzLiBUaGlzIGVuc3VyZXMgdGhhdCBidWlsZC1pblxuICAgIC8vIG1ldGhvZHMgbGlrZSBgdG9TdHJpbmdgIG9yIF9fcHJvdG9fXyBhcmUgbm90IG92ZXJyaWRlbiBieSBtYWxpY2lvdXNcbiAgICAvLyBxdWVyeXN0cmluZ3MuXG4gICAgLy9cbiAgICBpZiAoa2V5IGluIHJlc3VsdCkgY29udGludWU7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgcXVlcnkgc3RyaW5nIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0aGF0IHNob3VsZCBiZSB0cmFuc2Zvcm1lZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXggT3B0aW9uYWwgcHJlZml4LlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5naWZ5KG9iaiwgcHJlZml4KSB7XG4gIHByZWZpeCA9IHByZWZpeCB8fCAnJztcblxuICB2YXIgcGFpcnMgPSBbXTtcblxuICAvL1xuICAvLyBPcHRpb25hbGx5IHByZWZpeCB3aXRoIGEgJz8nIGlmIG5lZWRlZFxuICAvL1xuICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBwcmVmaXgpIHByZWZpeCA9ICc/JztcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhcy5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgcGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArJz0nKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2tleV0pKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFpcnMubGVuZ3RoID8gcHJlZml4ICsgcGFpcnMuam9pbignJicpIDogJyc7XG59XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5leHBvcnRzLnN0cmluZ2lmeSA9IHF1ZXJ5c3RyaW5naWZ5O1xuZXhwb3J0cy5wYXJzZSA9IHF1ZXJ5c3RyaW5nO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENoZWNrIGlmIHdlJ3JlIHJlcXVpcmVkIHRvIGFkZCBhIHBvcnQgbnVtYmVyLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkZWZhdWx0LXBvcnRcbiAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gcG9ydCBQb3J0IG51bWJlciB3ZSBuZWVkIHRvIGNoZWNrXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgd2UgbmVlZCB0byBjaGVjayBhZ2FpbnN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IElzIGl0IGEgZGVmYXVsdCBwb3J0IGZvciB0aGUgZ2l2ZW4gcHJvdG9jb2xcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcXVpcmVkKHBvcnQsIHByb3RvY29sKSB7XG4gIHByb3RvY29sID0gcHJvdG9jb2wuc3BsaXQoJzonKVswXTtcbiAgcG9ydCA9ICtwb3J0O1xuXG4gIGlmICghcG9ydCkgcmV0dXJuIGZhbHNlO1xuXG4gIHN3aXRjaCAocHJvdG9jb2wpIHtcbiAgICBjYXNlICdodHRwJzpcbiAgICBjYXNlICd3cyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDgwO1xuXG4gICAgY2FzZSAnaHR0cHMnOlxuICAgIGNhc2UgJ3dzcyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDQ0MztcblxuICAgIGNhc2UgJ2Z0cCc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDIxO1xuXG4gICAgY2FzZSAnZ29waGVyJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNzA7XG5cbiAgICBjYXNlICdmaWxlJzpcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gcG9ydCAhPT0gMDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciByZXF1aXJlZCA9IHJlcXVpcmUoJ3JlcXVpcmVzLXBvcnQnKVxuICAsIHFzID0gcmVxdWlyZSgncXVlcnlzdHJpbmdpZnknKVxuICAsIHByb3RvY29scmUgPSAvXihbYS16XVthLXowLTkuKy1dKjopPyhcXC9cXC8pPyhbXFxTXFxzXSopL2lcbiAgLCBzbGFzaGVzID0gL15bQS1aYS16XVtBLVphLXowLTkrLS5dKjpcXC9cXC8vO1xuXG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgcGFyc2UgcnVsZXMgZm9yIHRoZSBVUkwgcGFyc2VyLCBpdCBpbmZvcm1zIHRoZSBwYXJzZXJcbiAqIGFib3V0OlxuICpcbiAqIDAuIFRoZSBjaGFyIGl0IE5lZWRzIHRvIHBhcnNlLCBpZiBpdCdzIGEgc3RyaW5nIGl0IHNob3VsZCBiZSBkb25lIHVzaW5nXG4gKiAgICBpbmRleE9mLCBSZWdFeHAgdXNpbmcgZXhlYyBhbmQgTmFOIG1lYW5zIHNldCBhcyBjdXJyZW50IHZhbHVlLlxuICogMS4gVGhlIHByb3BlcnR5IHdlIHNob3VsZCBzZXQgd2hlbiBwYXJzaW5nIHRoaXMgdmFsdWUuXG4gKiAyLiBJbmRpY2F0aW9uIGlmIGl0J3MgYmFja3dhcmRzIG9yIGZvcndhcmQgcGFyc2luZywgd2hlbiBzZXQgYXMgbnVtYmVyIGl0J3NcbiAqICAgIHRoZSB2YWx1ZSBvZiBleHRyYSBjaGFycyB0aGF0IHNob3VsZCBiZSBzcGxpdCBvZmYuXG4gKiAzLiBJbmhlcml0IGZyb20gbG9jYXRpb24gaWYgbm9uIGV4aXN0aW5nIGluIHRoZSBwYXJzZXIuXG4gKiA0LiBgdG9Mb3dlckNhc2VgIHRoZSByZXN1bHRpbmcgdmFsdWUuXG4gKi9cbnZhciBydWxlcyA9IFtcbiAgWycjJywgJ2hhc2gnXSwgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnPycsICdxdWVyeSddLCAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBbJy8nLCAncGF0aG5hbWUnXSwgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgWydAJywgJ2F1dGgnLCAxXSwgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGZyb250LlxuICBbTmFOLCAnaG9zdCcsIHVuZGVmaW5lZCwgMSwgMV0sICAgICAgIC8vIFNldCBsZWZ0IG92ZXIgdmFsdWUuXG4gIFsvOihcXGQrKSQvLCAncG9ydCcsIHVuZGVmaW5lZCwgMV0sICAgIC8vIFJlZ0V4cCB0aGUgYmFjay5cbiAgW05hTiwgJ2hvc3RuYW1lJywgdW5kZWZpbmVkLCAxLCAxXSAgICAvLyBTZXQgbGVmdCBvdmVyLlxuXTtcblxuLyoqXG4gKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBub3QgYmUgY29waWVkIG9yIGluaGVyaXRlZCBmcm9tLiBUaGlzIGlzIG9ubHkgbmVlZGVkXG4gKiBmb3IgYWxsIG5vbiBibG9iIFVSTCdzIGFzIGEgYmxvYiBVUkwgZG9lcyBub3QgaW5jbHVkZSBhIGhhc2gsIG9ubHkgdGhlXG4gKiBvcmlnaW4uXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBpZ25vcmUgPSB7IGhhc2g6IDEsIHF1ZXJ5OiAxIH07XG5cbi8qKlxuICogVGhlIGxvY2F0aW9uIG9iamVjdCBkaWZmZXJzIHdoZW4geW91ciBjb2RlIGlzIGxvYWRlZCB0aHJvdWdoIGEgbm9ybWFsIHBhZ2UsXG4gKiBXb3JrZXIgb3IgdGhyb3VnaCBhIHdvcmtlciB1c2luZyBhIGJsb2IuIEFuZCB3aXRoIHRoZSBibG9iYmxlIGJlZ2lucyB0aGVcbiAqIHRyb3VibGUgYXMgdGhlIGxvY2F0aW9uIG9iamVjdCB3aWxsIGNvbnRhaW4gdGhlIFVSTCBvZiB0aGUgYmxvYiwgbm90IHRoZVxuICogbG9jYXRpb24gb2YgdGhlIHBhZ2Ugd2hlcmUgb3VyIGNvZGUgaXMgbG9hZGVkIGluLiBUaGUgYWN0dWFsIG9yaWdpbiBpc1xuICogZW5jb2RlZCBpbiB0aGUgYHBhdGhuYW1lYCBzbyB3ZSBjYW4gdGhhbmtmdWxseSBnZW5lcmF0ZSBhIGdvb2QgXCJkZWZhdWx0XCJcbiAqIGxvY2F0aW9uIGZyb20gaXQgc28gd2UgY2FuIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBVUkwncyBhZ2Fpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvYyBPcHRpb25hbCBkZWZhdWx0IGxvY2F0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGxvbGNhdGlvbiBvYmplY3QuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBsb2xjYXRpb24obG9jKSB7XG4gIGxvYyA9IGxvYyB8fCBnbG9iYWwubG9jYXRpb24gfHwge307XG5cbiAgdmFyIGZpbmFsZGVzdGluYXRpb24gPSB7fVxuICAgICwgdHlwZSA9IHR5cGVvZiBsb2NcbiAgICAsIGtleTtcblxuICBpZiAoJ2Jsb2I6JyA9PT0gbG9jLnByb3RvY29sKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwodW5lc2NhcGUobG9jLnBhdGhuYW1lKSwge30pO1xuICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwobG9jLCB7fSk7XG4gICAgZm9yIChrZXkgaW4gaWdub3JlKSBkZWxldGUgZmluYWxkZXN0aW5hdGlvbltrZXldO1xuICB9IGVsc2UgaWYgKCdvYmplY3QnID09PSB0eXBlKSB7XG4gICAgZm9yIChrZXkgaW4gbG9jKSB7XG4gICAgICBpZiAoa2V5IGluIGlnbm9yZSkgY29udGludWU7XG4gICAgICBmaW5hbGRlc3RpbmF0aW9uW2tleV0gPSBsb2Nba2V5XTtcbiAgICB9XG5cbiAgICBpZiAoZmluYWxkZXN0aW5hdGlvbi5zbGFzaGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbmFsZGVzdGluYXRpb24uc2xhc2hlcyA9IHNsYXNoZXMudGVzdChsb2MuaHJlZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbmFsZGVzdGluYXRpb247XG59XG5cbi8qKlxuICogQHR5cGVkZWYgUHJvdG9jb2xFeHRyYWN0XG4gKiBAdHlwZSBPYmplY3RcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCBtYXRjaGVkIGluIHRoZSBVUkwsIGluIGxvd2VyY2FzZS5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gc2xhc2hlcyBgdHJ1ZWAgaWYgcHJvdG9jb2wgaXMgZm9sbG93ZWQgYnkgXCIvL1wiLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gcmVzdCBSZXN0IG9mIHRoZSBVUkwgdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKi9cblxuLyoqXG4gKiBFeHRyYWN0IHByb3RvY29sIGluZm9ybWF0aW9uIGZyb20gYSBVUkwgd2l0aC93aXRob3V0IGRvdWJsZSBzbGFzaCAoXCIvL1wiKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBleHRyYWN0IGZyb20uXG4gKiBAcmV0dXJuIHtQcm90b2NvbEV4dHJhY3R9IEV4dHJhY3RlZCBpbmZvcm1hdGlvbi5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2woYWRkcmVzcykge1xuICB2YXIgbWF0Y2ggPSBwcm90b2NvbHJlLmV4ZWMoYWRkcmVzcyk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbDogbWF0Y2hbMV0gPyBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpIDogJycsXG4gICAgc2xhc2hlczogISFtYXRjaFsyXSxcbiAgICByZXN0OiBtYXRjaFszXVxuICB9O1xufVxuXG4vKipcbiAqIFJlc29sdmUgYSByZWxhdGl2ZSBVUkwgcGF0aG5hbWUgYWdhaW5zdCBhIGJhc2UgVVJMIHBhdGhuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZSBQYXRobmFtZSBvZiB0aGUgcmVsYXRpdmUgVVJMLlxuICogQHBhcmFtIHtTdHJpbmd9IGJhc2UgUGF0aG5hbWUgb2YgdGhlIGJhc2UgVVJMLlxuICogQHJldHVybiB7U3RyaW5nfSBSZXNvbHZlZCBwYXRobmFtZS5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXNvbHZlKHJlbGF0aXZlLCBiYXNlKSB7XG4gIHZhciBwYXRoID0gKGJhc2UgfHwgJy8nKS5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5jb25jYXQocmVsYXRpdmUuc3BsaXQoJy8nKSlcbiAgICAsIGkgPSBwYXRoLmxlbmd0aFxuICAgICwgbGFzdCA9IHBhdGhbaSAtIDFdXG4gICAgLCB1bnNoaWZ0ID0gZmFsc2VcbiAgICAsIHVwID0gMDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHBhdGhbaV0gPT09ICcuJykge1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChwYXRoW2ldID09PSAnLi4nKSB7XG4gICAgICBwYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgaWYgKGkgPT09IDApIHVuc2hpZnQgPSB0cnVlO1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIGlmICh1bnNoaWZ0KSBwYXRoLnVuc2hpZnQoJycpO1xuICBpZiAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHBhdGgucHVzaCgnJyk7XG5cbiAgcmV0dXJuIHBhdGguam9pbignLycpO1xufVxuXG4vKipcbiAqIFRoZSBhY3R1YWwgVVJMIGluc3RhbmNlLiBJbnN0ZWFkIG9mIHJldHVybmluZyBhbiBvYmplY3Qgd2UndmUgb3B0ZWQtaW4gdG9cbiAqIGNyZWF0ZSBhbiBhY3R1YWwgY29uc3RydWN0b3IgYXMgaXQncyBtdWNoIG1vcmUgbWVtb3J5IGVmZmljaWVudCBhbmRcbiAqIGZhc3RlciBhbmQgaXQgcGxlYXNlcyBteSBPQ0QuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBwYXJzZS5cbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gbG9jYXRpb24gTG9jYXRpb24gZGVmYXVsdHMgZm9yIHJlbGF0aXZlIHBhdGhzLlxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSBwYXJzZXIgUGFyc2VyIGZvciB0aGUgcXVlcnkgc3RyaW5nLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gVVJMKGFkZHJlc3MsIGxvY2F0aW9uLCBwYXJzZXIpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVSTCkpIHtcbiAgICByZXR1cm4gbmV3IFVSTChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKTtcbiAgfVxuXG4gIHZhciByZWxhdGl2ZSwgZXh0cmFjdGVkLCBwYXJzZSwgaW5zdHJ1Y3Rpb24sIGluZGV4LCBrZXlcbiAgICAsIGluc3RydWN0aW9ucyA9IHJ1bGVzLnNsaWNlKClcbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jYXRpb25cbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIGkgPSAwO1xuXG4gIC8vXG4gIC8vIFRoZSBmb2xsb3dpbmcgaWYgc3RhdGVtZW50cyBhbGxvd3MgdGhpcyBtb2R1bGUgdHdvIGhhdmUgY29tcGF0aWJpbGl0eSB3aXRoXG4gIC8vIDIgZGlmZmVyZW50IEFQSTpcbiAgLy9cbiAgLy8gMS4gTm9kZS5qcydzIGB1cmwucGFyc2VgIGFwaSB3aGljaCBhY2NlcHRzIGEgVVJMLCBib29sZWFuIGFzIGFyZ3VtZW50c1xuICAvLyAgICB3aGVyZSB0aGUgYm9vbGVhbiBpbmRpY2F0ZXMgdGhhdCB0aGUgcXVlcnkgc3RyaW5nIHNob3VsZCBhbHNvIGJlIHBhcnNlZC5cbiAgLy9cbiAgLy8gMi4gVGhlIGBVUkxgIGludGVyZmFjZSBvZiB0aGUgYnJvd3NlciB3aGljaCBhY2NlcHRzIGEgVVJMLCBvYmplY3QgYXNcbiAgLy8gICAgYXJndW1lbnRzLiBUaGUgc3VwcGxpZWQgb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyBkZWZhdWx0IHZhbHVlcyAvIGZhbGwtYmFja1xuICAvLyAgICBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gIC8vXG4gIGlmICgnb2JqZWN0JyAhPT0gdHlwZSAmJiAnc3RyaW5nJyAhPT0gdHlwZSkge1xuICAgIHBhcnNlciA9IGxvY2F0aW9uO1xuICAgIGxvY2F0aW9uID0gbnVsbDtcbiAgfVxuXG4gIGlmIChwYXJzZXIgJiYgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHBhcnNlcikgcGFyc2VyID0gcXMucGFyc2U7XG5cbiAgbG9jYXRpb24gPSBsb2xjYXRpb24obG9jYXRpb24pO1xuXG4gIC8vXG4gIC8vIEV4dHJhY3QgcHJvdG9jb2wgaW5mb3JtYXRpb24gYmVmb3JlIHJ1bm5pbmcgdGhlIGluc3RydWN0aW9ucy5cbiAgLy9cbiAgZXh0cmFjdGVkID0gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MgfHwgJycpO1xuICByZWxhdGl2ZSA9ICFleHRyYWN0ZWQucHJvdG9jb2wgJiYgIWV4dHJhY3RlZC5zbGFzaGVzO1xuICB1cmwuc2xhc2hlcyA9IGV4dHJhY3RlZC5zbGFzaGVzIHx8IHJlbGF0aXZlICYmIGxvY2F0aW9uLnNsYXNoZXM7XG4gIHVybC5wcm90b2NvbCA9IGV4dHJhY3RlZC5wcm90b2NvbCB8fCBsb2NhdGlvbi5wcm90b2NvbCB8fCAnJztcbiAgYWRkcmVzcyA9IGV4dHJhY3RlZC5yZXN0O1xuXG4gIC8vXG4gIC8vIFdoZW4gdGhlIGF1dGhvcml0eSBjb21wb25lbnQgaXMgYWJzZW50IHRoZSBVUkwgc3RhcnRzIHdpdGggYSBwYXRoXG4gIC8vIGNvbXBvbmVudC5cbiAgLy9cbiAgaWYgKCFleHRyYWN0ZWQuc2xhc2hlcykgaW5zdHJ1Y3Rpb25zWzJdID0gWy8oLiopLywgJ3BhdGhuYW1lJ107XG5cbiAgZm9yICg7IGkgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcbiAgICBwYXJzZSA9IGluc3RydWN0aW9uWzBdO1xuICAgIGtleSA9IGluc3RydWN0aW9uWzFdO1xuXG4gICAgaWYgKHBhcnNlICE9PSBwYXJzZSkge1xuICAgICAgdXJsW2tleV0gPSBhZGRyZXNzO1xuICAgIH0gZWxzZSBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBwYXJzZSkge1xuICAgICAgaWYgKH4oaW5kZXggPSBhZGRyZXNzLmluZGV4T2YocGFyc2UpKSkge1xuICAgICAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBpbnN0cnVjdGlvblsyXSkge1xuICAgICAgICAgIHVybFtrZXldID0gYWRkcmVzcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoaW5kZXggKyBpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXJsW2tleV0gPSBhZGRyZXNzLnNsaWNlKGluZGV4KTtcbiAgICAgICAgICBhZGRyZXNzID0gYWRkcmVzcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChpbmRleCA9IHBhcnNlLmV4ZWMoYWRkcmVzcykpKSB7XG4gICAgICB1cmxba2V5XSA9IGluZGV4WzFdO1xuICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXguaW5kZXgpO1xuICAgIH1cblxuICAgIHVybFtrZXldID0gdXJsW2tleV0gfHwgKFxuICAgICAgcmVsYXRpdmUgJiYgaW5zdHJ1Y3Rpb25bM10gPyBsb2NhdGlvbltrZXldIHx8ICcnIDogJydcbiAgICApO1xuXG4gICAgLy9cbiAgICAvLyBIb3N0bmFtZSwgaG9zdCBhbmQgcHJvdG9jb2wgc2hvdWxkIGJlIGxvd2VyY2FzZWQgc28gdGhleSBjYW4gYmUgdXNlZCB0b1xuICAgIC8vIGNyZWF0ZSBhIHByb3BlciBgb3JpZ2luYC5cbiAgICAvL1xuICAgIGlmIChpbnN0cnVjdGlvbls0XSkgdXJsW2tleV0gPSB1cmxba2V5XS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgLy9cbiAgLy8gQWxzbyBwYXJzZSB0aGUgc3VwcGxpZWQgcXVlcnkgc3RyaW5nIGluIHRvIGFuIG9iamVjdC4gSWYgd2UncmUgc3VwcGxpZWRcbiAgLy8gd2l0aCBhIGN1c3RvbSBwYXJzZXIgYXMgZnVuY3Rpb24gdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBidWlsZC1pblxuICAvLyBwYXJzZXIuXG4gIC8vXG4gIGlmIChwYXJzZXIpIHVybC5xdWVyeSA9IHBhcnNlcih1cmwucXVlcnkpO1xuXG4gIC8vXG4gIC8vIElmIHRoZSBVUkwgaXMgcmVsYXRpdmUsIHJlc29sdmUgdGhlIHBhdGhuYW1lIGFnYWluc3QgdGhlIGJhc2UgVVJMLlxuICAvL1xuICBpZiAoXG4gICAgICByZWxhdGl2ZVxuICAgICYmIGxvY2F0aW9uLnNsYXNoZXNcbiAgICAmJiB1cmwucGF0aG5hbWUuY2hhckF0KDApICE9PSAnLydcbiAgICAmJiAodXJsLnBhdGhuYW1lICE9PSAnJyB8fCBsb2NhdGlvbi5wYXRobmFtZSAhPT0gJycpXG4gICkge1xuICAgIHVybC5wYXRobmFtZSA9IHJlc29sdmUodXJsLnBhdGhuYW1lLCBsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH1cblxuICAvL1xuICAvLyBXZSBzaG91bGQgbm90IGFkZCBwb3J0IG51bWJlcnMgaWYgdGhleSBhcmUgYWxyZWFkeSB0aGUgZGVmYXVsdCBwb3J0IG51bWJlclxuICAvLyBmb3IgYSBnaXZlbiBwcm90b2NvbC4gQXMgdGhlIGhvc3QgYWxzbyBjb250YWlucyB0aGUgcG9ydCBudW1iZXIgd2UncmUgZ29pbmdcbiAgLy8gb3ZlcnJpZGUgaXQgd2l0aCB0aGUgaG9zdG5hbWUgd2hpY2ggY29udGFpbnMgbm8gcG9ydCBudW1iZXIuXG4gIC8vXG4gIGlmICghcmVxdWlyZWQodXJsLnBvcnQsIHVybC5wcm90b2NvbCkpIHtcbiAgICB1cmwuaG9zdCA9IHVybC5ob3N0bmFtZTtcbiAgICB1cmwucG9ydCA9ICcnO1xuICB9XG5cbiAgLy9cbiAgLy8gUGFyc2UgZG93biB0aGUgYGF1dGhgIGZvciB0aGUgdXNlcm5hbWUgYW5kIHBhc3N3b3JkLlxuICAvL1xuICB1cmwudXNlcm5hbWUgPSB1cmwucGFzc3dvcmQgPSAnJztcbiAgaWYgKHVybC5hdXRoKSB7XG4gICAgaW5zdHJ1Y3Rpb24gPSB1cmwuYXV0aC5zcGxpdCgnOicpO1xuICAgIHVybC51c2VybmFtZSA9IGluc3RydWN0aW9uWzBdIHx8ICcnO1xuICAgIHVybC5wYXNzd29yZCA9IGluc3RydWN0aW9uWzFdIHx8ICcnO1xuICB9XG5cbiAgdXJsLm9yaWdpbiA9IHVybC5wcm90b2NvbCAmJiB1cmwuaG9zdCAmJiB1cmwucHJvdG9jb2wgIT09ICdmaWxlOidcbiAgICA/IHVybC5wcm90b2NvbCArJy8vJysgdXJsLmhvc3RcbiAgICA6ICdudWxsJztcblxuICAvL1xuICAvLyBUaGUgaHJlZiBpcyBqdXN0IHRoZSBjb21waWxlZCByZXN1bHQuXG4gIC8vXG4gIHVybC5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogVGhpcyBpcyBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGNoYW5naW5nIHByb3BlcnRpZXMgaW4gdGhlIFVSTCBpbnN0YW5jZSB0b1xuICogaW5zdXJlIHRoYXQgdGhleSBhbGwgcHJvcGFnYXRlIGNvcnJlY3RseS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFydCAgICAgICAgICBQcm9wZXJ0eSB3ZSBuZWVkIHRvIGFkanVzdC5cbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlICAgICAgICAgIFRoZSBuZXdseSBhc3NpZ25lZCB2YWx1ZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gZm4gIFdoZW4gc2V0dGluZyB0aGUgcXVlcnksIGl0IHdpbGwgYmUgdGhlIGZ1bmN0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VkIHRvIHBhcnNlIHRoZSBxdWVyeS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdoZW4gc2V0dGluZyB0aGUgcHJvdG9jb2wsIGRvdWJsZSBzbGFzaCB3aWxsIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkIGZyb20gdGhlIGZpbmFsIHVybCBpZiBpdCBpcyB0cnVlLlxuICogQHJldHVybnMge1VSTH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHNldChwYXJ0LCB2YWx1ZSwgZm4pIHtcbiAgdmFyIHVybCA9IHRoaXM7XG5cbiAgc3dpdGNoIChwYXJ0KSB7XG4gICAgY2FzZSAncXVlcnknOlxuICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdmFsdWUgJiYgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlID0gKGZuIHx8IHFzLnBhcnNlKSh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdwb3J0JzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAoIXJlcXVpcmVkKHZhbHVlLCB1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgICAgICB1cmxbcGFydF0gPSAnJztcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWUgKyc6JysgdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaG9zdG5hbWUnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICh1cmwucG9ydCkgdmFsdWUgKz0gJzonKyB1cmwucG9ydDtcbiAgICAgIHVybC5ob3N0ID0gdmFsdWU7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvc3QnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICgvOlxcZCskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgIHVybC5wb3J0ID0gdmFsdWUucG9wKCk7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlLmpvaW4oJzonKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlO1xuICAgICAgICB1cmwucG9ydCA9ICcnO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3Byb3RvY29sJzpcbiAgICAgIHVybC5wcm90b2NvbCA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICB1cmwuc2xhc2hlcyA9ICFmbjtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncGF0aG5hbWUnOlxuICAgIGNhc2UgJ2hhc2gnOlxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHZhciBjaGFyID0gcGFydCA9PT0gJ3BhdGhuYW1lJyA/ICcvJyA6ICcjJztcbiAgICAgICAgdXJsW3BhcnRdID0gdmFsdWUuY2hhckF0KDApICE9PSBjaGFyID8gY2hhciArIHZhbHVlIDogdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpbnMgPSBydWxlc1tpXTtcblxuICAgIGlmIChpbnNbNF0pIHVybFtpbnNbMV1dID0gdXJsW2luc1sxXV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIHVybC5vcmlnaW4gPSB1cmwucHJvdG9jb2wgJiYgdXJsLmhvc3QgJiYgdXJsLnByb3RvY29sICE9PSAnZmlsZTonXG4gICAgPyB1cmwucHJvdG9jb2wgKycvLycrIHVybC5ob3N0XG4gICAgOiAnbnVsbCc7XG5cbiAgdXJsLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcblxuICByZXR1cm4gdXJsO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgcHJvcGVydGllcyBiYWNrIGluIHRvIGEgdmFsaWQgYW5kIGZ1bGwgVVJMIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdHJpbmdpZnkgT3B0aW9uYWwgcXVlcnkgc3RyaW5naWZ5IGZ1bmN0aW9uLlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHN0cmluZ2lmeSkge1xuICBpZiAoIXN0cmluZ2lmeSB8fCAnZnVuY3Rpb24nICE9PSB0eXBlb2Ygc3RyaW5naWZ5KSBzdHJpbmdpZnkgPSBxcy5zdHJpbmdpZnk7XG5cbiAgdmFyIHF1ZXJ5XG4gICAgLCB1cmwgPSB0aGlzXG4gICAgLCBwcm90b2NvbCA9IHVybC5wcm90b2NvbDtcblxuICBpZiAocHJvdG9jb2wgJiYgcHJvdG9jb2wuY2hhckF0KHByb3RvY29sLmxlbmd0aCAtIDEpICE9PSAnOicpIHByb3RvY29sICs9ICc6JztcblxuICB2YXIgcmVzdWx0ID0gcHJvdG9jb2wgKyAodXJsLnNsYXNoZXMgPyAnLy8nIDogJycpO1xuXG4gIGlmICh1cmwudXNlcm5hbWUpIHtcbiAgICByZXN1bHQgKz0gdXJsLnVzZXJuYW1lO1xuICAgIGlmICh1cmwucGFzc3dvcmQpIHJlc3VsdCArPSAnOicrIHVybC5wYXNzd29yZDtcbiAgICByZXN1bHQgKz0gJ0AnO1xuICB9XG5cbiAgcmVzdWx0ICs9IHVybC5ob3N0ICsgdXJsLnBhdGhuYW1lO1xuXG4gIHF1ZXJ5ID0gJ29iamVjdCcgPT09IHR5cGVvZiB1cmwucXVlcnkgPyBzdHJpbmdpZnkodXJsLnF1ZXJ5KSA6IHVybC5xdWVyeTtcbiAgaWYgKHF1ZXJ5KSByZXN1bHQgKz0gJz8nICE9PSBxdWVyeS5jaGFyQXQoMCkgPyAnPycrIHF1ZXJ5IDogcXVlcnk7XG5cbiAgaWYgKHVybC5oYXNoKSByZXN1bHQgKz0gdXJsLmhhc2g7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuVVJMLnByb3RvdHlwZSA9IHsgc2V0OiBzZXQsIHRvU3RyaW5nOiB0b1N0cmluZyB9O1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBVUkwgcGFyc2VyIGFuZCBzb21lIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0aGF0IG1pZ2h0IGJlIHVzZWZ1bCBmb3Jcbi8vIG90aGVycyBvciB0ZXN0aW5nLlxuLy9cblVSTC5leHRyYWN0UHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2w7XG5VUkwubG9jYXRpb24gPSBsb2xjYXRpb247XG5VUkwucXMgPSBxcztcblxubW9kdWxlLmV4cG9ydHMgPSBVUkw7XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQ29uZmlnRWxlbWVudFR5cGU7XG4oZnVuY3Rpb24gKENvbmZpZ0VsZW1lbnRUeXBlKSB7XG4gICAgQ29uZmlnRWxlbWVudFR5cGVbQ29uZmlnRWxlbWVudFR5cGVbXCJESU1FTlNJT05cIl0gPSAxXSA9IFwiRElNRU5TSU9OXCI7XG4gICAgQ29uZmlnRWxlbWVudFR5cGVbQ29uZmlnRWxlbWVudFR5cGVbXCJNRVRSSUNcIl0gPSAyXSA9IFwiTUVUUklDXCI7XG4gICAgQ29uZmlnRWxlbWVudFR5cGVbQ29uZmlnRWxlbWVudFR5cGVbXCJNQVhfUkVTVUxUU1wiXSA9IDNdID0gXCJNQVhfUkVTVUxUU1wiO1xufSkoQ29uZmlnRWxlbWVudFR5cGUgPSBleHBvcnRzLkNvbmZpZ0VsZW1lbnRUeXBlIHx8IChleHBvcnRzLkNvbmZpZ0VsZW1lbnRUeXBlID0ge30pKTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRFMgPSByZXF1aXJlKFwiLi9kYXRhLXN0dWRpby10eXBlc1wiKTtcbnZhciBhc3NvYyA9IGZ1bmN0aW9uICh0LCBuZXdLZXksIG5ld1ZhbCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0LCAoX2EgPSB7fSwgX2FbbmV3S2V5XSA9IG5ld1ZhbCwgX2EpKTtcbiAgICB2YXIgX2E7XG59O1xudmFyIHppcDIgPSBmdW5jdGlvbiAodHMsIHVzKSB7XG4gICAgcmV0dXJuIHRzLm1hcChmdW5jdGlvbiAodCwgaWR4KSB7IHJldHVybiBbdCwgdXNbaWR4XV07IH0pO1xufTtcbnZhciB6aXAzID0gZnVuY3Rpb24gKHRzLCB1cywgdnMpIHtcbiAgICByZXR1cm4gdHMubWFwKGZ1bmN0aW9uICh0LCBpZHgpIHsgcmV0dXJuIFt0LCB1c1tpZHhdLCB2c1tpZHhdXTsgfSk7XG59O1xudmFyIHJlcGVhdCA9IGZ1bmN0aW9uIChuLCB2YWwpIHtcbiAgICB2YXIgdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB0cy5wdXNoKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB0cztcbn07XG5leHBvcnRzLmRlc3RydWN0SW1hZ2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgX2EgPSB2YWx1ZS5zcGxpdCgnXFx1MDBhMFxcdTAwYTAnKSwgb3JpZ2luYWxVcmwgPSBfYVswXSwgcHJveGllZFVybCA9IF9hWzFdLCBhbHRUZXh0ID0gX2FbMl07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3JpZ2luYWxVcmw6IG9yaWdpbmFsVXJsLFxuICAgICAgICBwcm94aWVkVXJsOiBwcm94aWVkVXJsLFxuICAgICAgICBhbHRUZXh0OiBhbHRUZXh0LFxuICAgIH07XG59O1xudmFyIHVwZGF0ZSA9IGZ1bmN0aW9uIChvYmosIHByb3BlcnR5LCBmKSB7XG4gICAgdmFyIG5ld1Byb3AgPSBmKG9ialtwcm9wZXJ0eV0pO1xuICAgIHJldHVybiBhc3NvYyhvYmosIHByb3BlcnR5LCBuZXdQcm9wKTtcbn07XG52YXIgdG9GaWVsZFR5cGUgPSBmdW5jdGlvbiAoc2NoZW1hRW50cnkpIHtcbiAgICByZXR1cm4gc2NoZW1hRW50cnkuc2VtYW50aWMgPT09ICdDVVJSRU5DWSdcbiAgICAgICAgPyAoJ0NVUlJFTkNZXycgKyBzY2hlbWFFbnRyeS5zZW1hbnRpY09wdGlvbilcbiAgICAgICAgOiBzY2hlbWFFbnRyeS5zZW1hbnRpYztcbn07XG52YXIgc2NoZW1hRW50cnlUb0ZpZWxkID0gZnVuY3Rpb24gKGNvbmZpZ0lkLCBzY2hlbWFFbnRyeSkgeyByZXR1cm4gKHtcbiAgICBpZDogY29uZmlnSWQsXG4gICAgY29uY2VwdDogc2NoZW1hRW50cnkuY29uY2VwdCxcbiAgICBkYXRhU3R1ZGlvSWQ6IHNjaGVtYUVudHJ5Lm5hbWUsXG4gICAgbmFtZTogc2NoZW1hRW50cnkubGFiZWwsXG4gICAgdHlwZTogdG9GaWVsZFR5cGUoc2NoZW1hRW50cnkpLFxufSk7IH07XG52YXIgdG9MaWJSb3dWYWx1ZSA9IGZ1bmN0aW9uIChyb3dWYWx1ZSwgc2NoZW1hRW50cnkpIHtcbiAgICByZXR1cm4gc2NoZW1hRW50cnkuc2VtYW50aWMgPT09ICdJTUFHRSdcbiAgICAgICAgPyBleHBvcnRzLmRlc3RydWN0SW1hZ2Uocm93VmFsdWUpXG4gICAgICAgIDogcm93VmFsdWU7XG59O1xuLy8gd2UgYXJlIHByb21pc2VkIHRoYXQgdGhlcmUgd2lsbCBiZSBvbmUgZGltZW5zaW9uIGdyb3VwIGFuZCBvbmUgbWV0cmljIGdyb3VwLlxuLy8gQm90aCBvZiB0aGVzZSBjYW4gaGF2ZSBiZXR3ZWVuIDEgYW5kIDIwIGVudHJpZXMuIFRoaXMgam9pbnMgdG9nZXRoZXIgdGhlXG4vLyBkYXRhLCBzY2hlbWEsIGFuZCBjb25maWcgdmFsdWVzIGludG8gb25lIGNvbXBvc2l0ZSBvYmplY3QuXG5leHBvcnRzLmJ1aWxkRmllbGRzQW5kUm93cyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIGZpcnN0Um93ID0gbWVzc2FnZS5yb3dzLnByaW1hcnlSb3dzWzBdO1xuICAgIHZhciBmbGF0dGVuZWRFbGVtZW50cyA9IG1lc3NhZ2UuZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY29uZmlnRGF0YSkge1xuICAgICAgICByZXR1cm4gY29uZmlnRGF0YS5lbGVtZW50c1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudHlwZSA9PT0gRFMuQ29uZmlnRWxlbWVudFR5cGUuRElNRU5TSU9OIHx8XG4gICAgICAgICAgICAgICAgZWxlbWVudC50eXBlID09PSBEUy5Db25maWdFbGVtZW50VHlwZS5NRVRSSUM7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGFjYy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgW10pO1xuICAgIH0sIFtdKTtcbiAgICBpZiAoZmxhdHRlbmVkRWxlbWVudHMubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgIHRocm93IFwiT25seSBjb25maWdzIHdpdGggb25lIG1ldHJpYyBhbmQgb25lIGRpbWVuc2lvbiBhcmUgc3VwcG9ydGVkLiBZb3VyIGNvbmZpZzpcXG5cIiArIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UuZGF0YSk7XG4gICAgfVxuICAgIGlmIChmbGF0dGVuZWRFbGVtZW50c1swXS50eXBlICE9PSBEUy5Db25maWdFbGVtZW50VHlwZS5ESU1FTlNJT04pIHtcbiAgICAgICAgdGhyb3cgXCJZb3VyIGZpcnN0IGNvbmZpZyBlbGVtZW50IG11c3QgYmUgYSBkaW1lbnNpb24uIFlvdXIgZmlyc3Q6IFwiICsgZmxhdHRlbmVkRWxlbWVudHNbMF07XG4gICAgfVxuICAgIGlmIChmbGF0dGVuZWRFbGVtZW50c1sxXS50eXBlICE9PSBEUy5Db25maWdFbGVtZW50VHlwZS5NRVRSSUMpIHtcbiAgICAgICAgdGhyb3cgXCJZb3VyIHNlY29uZCBjb25maWcgZWxlbWVudCBtdXN0IGJlIGEgbWV0cmljLiBZb3VyIGZpcnN0OiBcIiArIGZsYXR0ZW5lZEVsZW1lbnRzWzBdO1xuICAgIH1cbiAgICB2YXIgZGltZW5zaW9uQ29uZmlnID0gZmxhdHRlbmVkRWxlbWVudHNbMF07XG4gICAgdmFyIG1ldHJpY0NvbmZpZyA9IGZsYXR0ZW5lZEVsZW1lbnRzWzFdO1xuICAgIHZhciBzY2hlbWEgPSBtZXNzYWdlLnNjaGVtYTtcbiAgICB2YXIgY29uZmlncyA9IHNjaGVtYS5tYXAoZnVuY3Rpb24gKHNjaGVtYUVudHJ5KSB7XG4gICAgICAgIHJldHVybiBzY2hlbWFFbnRyeS5jb25jZXB0ID09PSAnRElNRU5TSU9OJyA/IGRpbWVuc2lvbkNvbmZpZyA6IG1ldHJpY0NvbmZpZztcbiAgICB9KTtcbiAgICB2YXIgZmllbGRzID0gemlwMihzY2hlbWEsIGNvbmZpZ3MpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfYSkge1xuICAgICAgICB2YXIgc2NoZW1hRW50cnkgPSBfYVswXSwgY29uZmlnID0gX2FbMV07XG4gICAgICAgIHJldHVybiB1cGRhdGUoYWNjLCBjb25maWcuaWQsIGZ1bmN0aW9uIChvbGQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IHNjaGVtYUVudHJ5VG9GaWVsZChjb25maWcuaWQsIHNjaGVtYUVudHJ5KTtcbiAgICAgICAgICAgIHJldHVybiBvbGQgPT09IHVuZGVmaW5lZCA/IFtmaWVsZF0gOiBvbGQuY29uY2F0KFtmaWVsZF0pO1xuICAgICAgICB9KTtcbiAgICB9LCB7fSk7XG4gICAgdmFyIGZpeFJvdyA9IGZ1bmN0aW9uIChkYXRhVGFnKSB7IHJldHVybiBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgIHJldHVybiB6aXAzKHJvdywgc2NoZW1hLCBjb25maWdzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgX2EpIHtcbiAgICAgICAgICAgIHZhciByb3dWYWx1ZSA9IF9hWzBdLCBzY2hlbWFFbnRyeSA9IF9hWzFdLCBjb25maWcgPSBfYVsyXTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGUoYWNjLCBjb25maWcuaWQsIGZ1bmN0aW9uIChvbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gdG9MaWJSb3dWYWx1ZShyb3dWYWx1ZSwgc2NoZW1hRW50cnkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvbGQgPT09IHVuZGVmaW5lZCA/IFt2YWxdIDogb2xkLmNvbmNhdChbdmFsXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgeyBkYXRhVGFnOiBkYXRhVGFnIH0pO1xuICAgIH07IH07XG4gICAgdmFyIHJvd3MgPSBtZXNzYWdlLnJvd3MuY29tcGFyaXNvblJvd3NcbiAgICAgICAgLm1hcChmaXhSb3coJ2NvbXBhcmlzb25Sb3cnKSlcbiAgICAgICAgLmNvbmNhdChtZXNzYWdlLnJvd3MucHJpbWFyeVJvd3MubWFwKGZpeFJvdygncHJpbWFyeVJvdycpKSk7XG4gICAgcmV0dXJuIHsgZmllbGRzOiBmaWVsZHMsIHJvd3M6IHJvd3MgfTtcbn07XG5leHBvcnRzLnRyYW5zZm9ybURhdGEgPSBmdW5jdGlvbiAobWVzc2FnZSkgeyByZXR1cm4gKF9fYXNzaWduKHsgc3R5bGU6IG1lc3NhZ2Uuc3R5bGUsIHR5cGU6IG1lc3NhZ2UudHlwZSB9LCBleHBvcnRzLmJ1aWxkRmllbGRzQW5kUm93cyhtZXNzYWdlKSkpOyB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSB5W29wWzBdICYgMiA/IFwicmV0dXJuXCIgOiBvcFswXSA/IFwidGhyb3dcIiA6IFwibmV4dFwiXSkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gWzAsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfdGhpcyA9IHRoaXM7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiFcbiAgQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG52YXIgZGF0YV90cmFuc2Zvcm1fMSA9IHJlcXVpcmUoXCIuL2RhdGEtdHJhbnNmb3JtXCIpO1xudmFyIHBhcnNlID0gcmVxdWlyZShcInVybC1wYXJzZVwiKTtcbmV4cG9ydHMucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoY2xpZW50TWVzc2FnZSkge1xuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoY2xpZW50TWVzc2FnZSwgJyonKTtcbn07XG5leHBvcnRzLmdldFdpZHRoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsgfTtcbmV4cG9ydHMuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsgfTtcbmV4cG9ydHMuZ2V0Q29tcG9uZW50SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlKHdpbmRvdy5wYXJlbnQubG9jYXRpb24uaHJlZiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHBhcnNlZC5xdWVyeS5jb21wb25lbnRJZDtcbn07XG5leHBvcnRzLnN1YnNjcmliZVRvRGF0YSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgc3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICAgIGlmIChzdWJzY3JpcHRpb25PcHRpb25zID09PSB2b2lkIDApIHsgc3Vic2NyaXB0aW9uT3B0aW9ucyA9IHsgdHJhbnNmb3JtOiBkYXRhX3RyYW5zZm9ybV8xLnRyYW5zZm9ybURhdGEgfTsgfVxuICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm0sIG9uTWVzc2FnZSwgY29tcG9uZW50SWQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHN1YnNjcmlwdGlvbk9wdGlvbnMudHJhbnNmb3JtO1xuICAgICAgICAgICAgb25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhLnR5cGUgPT09ICdSRU5ERVInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlRGF0YSA9IG1lc3NhZ2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJhbnNmb3JtKG1lc3NhZ2VEYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gZXhwb3J0cy5nZXRDb21wb25lbnRJZCgpO1xuICAgICAgICAgICAgZXhwb3J0cy5wb3N0TWVzc2FnZSh7IGNvbXBvbmVudElkOiBjb21wb25lbnRJZCwgdHlwZTogJ3ZpelJlYWR5JyB9KTtcbiAgICAgICAgICAgIC8vIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gdW5zdWJzY3JpYmUgdG8gdGhlIGRhdGEgc3RyZWFtLlxuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKTsgfV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyohXG4gIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcblxuICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xudmFyIGltcGwgPSByZXF1aXJlKFwiLi9pbXBsXCIpO1xuZXhwb3J0cy5zdWJzY3JpYmVUb0RhdGEgPSBpbXBsLnN1YnNjcmliZVRvRGF0YTtcbmV4cG9ydHMuZ2V0V2lkdGggPSBpbXBsLmdldFdpZHRoO1xuZXhwb3J0cy5nZXRIZWlnaHQgPSBpbXBsLmdldEhlaWdodDtcbiJdLCJzb3VyY2VSb290IjoiIn0=
